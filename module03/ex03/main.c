#include "main.h"

volatile uint8_t	state = 0;

void wheel(uint8_t pos) {
	pos = 255 - pos;
	if (pos < 85) {
	set_rgb(255 - pos * 3, 0, pos * 3);
	} else if (pos < 170) {
	pos = pos - 85;
	set_rgb(0, pos * 3, 255 - pos * 3);
	} else {
	pos = pos - 170;
	set_rgb(pos * 3, 255 - pos * 3, 0);
	}
}

 ISR(TIMER1_COMPA_vect){
	wheel(state++);
 }

int	main(void){
	init_rgb();
	timer1_init(50);
	timer1_start();
	while(1){
	}
	return (0);
}

/*
--------------------------------------------------------------
|            TIMER0 â€“ Registres pour PWM (Rouge & Vert)      |
--------------------------------------------------------------

--------------------------------------------------------------
|  TCCR0A â€“ Timer/Counter Control Register A (p.108 de la doc)  |
--------------------------------------------------------------
| COM0A1 | COM0A0 | COM0B1 | COM0B0 |  -  |  -  | WGM01 | WGM00 |
|   7    |   6    |   5    |   4    |  3  |  2  |   1   |   0   |
--------------------------------------------------------------
| COM0A1 | 1 = Active le PWM sur OC0A (âœ… LED Rouge sur PD6) |
| COM0B1 | 1 = Active le PWM sur OC0B (âœ… LED Verte sur PD5) |
| WGM01:WGM00 | 11 = Mode **Fast PWM** (comptage de 0 Ã  255) |
--------------------------------------------------------------
|                                                             |
| ðŸ’¡ UtilisÃ© pour gÃ©nÃ©rer un signal PWM sur Rouge et Vert.   |
--------------------------------------------------------------

--------------------------------------------------------------
|  TCCR0B â€“ Timer/Counter Control Register B (p.109 de la doc)  |
--------------------------------------------------------------
|  -  |  -  |  -  |  -  | WGM02 | CS02 | CS01 | CS00 |
|  7  |  6  |  5  |  4  |   3   |   2  |   1  |   0  |
--------------------------------------------------------------
| CS01 | 1 = Prescaler **8** â†’ FrÃ©quence PWM â‰ˆ 7.81 kHz |
--------------------------------------------------------------
|                                                             |
| ðŸ’¡ Permet dâ€™avoir une frÃ©quence PWM idÃ©ale pour LED RGB.  |
--------------------------------------------------------------

--------------------------------------------------------------
|            TIMER2 â€“ Registres pour PWM (Bleu)              |
--------------------------------------------------------------

--------------------------------------------------------------
|  TCCR2A â€“ Timer/Counter Control Register A (p.128 de la doc)  |
--------------------------------------------------------------
| COM2A1 | COM2A0 | COM2B1 | COM2B0 |  -  |  -  | WGM21 | WGM20 |
|   7    |   6    |   5    |   4    |  3  |  2  |   1   |   0   |
--------------------------------------------------------------
| COM2B1 | 1 = Active le PWM sur OC2B (âœ… LED Bleue sur PD3) |
| WGM21:WGM20 | 11 = Mode **Fast PWM** (comptage de 0 Ã  255) |
--------------------------------------------------------------
|                                                             |
| ðŸ’¡ UtilisÃ© pour gÃ©nÃ©rer un signal PWM sur la LED Bleue.   |
--------------------------------------------------------------

--------------------------------------------------------------
|  TCCR2B â€“ Timer/Counter Control Register B (p.129 de la doc)  |
--------------------------------------------------------------
| FOC2A | FOC2B |  -  |  -  | WGM22 | CS22 | CS21 | CS20 |
|   7   |   6   |  5  |  4  |   3   |   2  |   1  |   0  |
--------------------------------------------------------------
| CS21 | 1 = Prescaler **8** â†’ FrÃ©quence PWM â‰ˆ 7.81 kHz |
--------------------------------------------------------------
|                                                             |
| ðŸ’¡ Permet dâ€™avoir une frÃ©quence PWM idÃ©ale pour LED RGB.  |
--------------------------------------------------------------

--------------------------------------------------------------
|  OCR0A, OCR0B, OCR2B â€“ Output Compare Registers (p.112, 131)  |
--------------------------------------------------------------
| OCR0A (8 bits) = IntensitÃ© du Rouge (0-255) |
| OCR0B (8 bits) = IntensitÃ© du Vert (0-255)  |
| OCR2B (8 bits) = IntensitÃ© du Bleu (0-255)  |
--------------------------------------------------------------
|                                                             |
| ðŸ’¡ Plus la valeur est Ã©levÃ©e, plus la LED est lumineuse. |
--------------------------------------------------------------

*/
